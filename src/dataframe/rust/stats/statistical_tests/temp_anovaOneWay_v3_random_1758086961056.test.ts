#!/usr/bin/env -S deno run --allow-read --allow-run

import { printResults, runComparison } from "./test-helpers.ts";

async function main() {
  console.log("Testing R vs Rust anovaOneWay_v3 with random data...\n");

  const testCases = [
  {
    "testName": "Random One-way ANOVA (4 groups, α=0.10)",
    "func": "aov.one",
    "distribution": "anova",
    "args": [
      "[[-1.483821201141733,-1.2076318462151239,0.053477657156647096,-0.6145534723981141,0.6551360666686392,-2.4771538551183085,-0.8402733850813531,-1.2812896681116388,-1.1027059846096416,-1.2198052731003624,-0.6202242028837519,-1.1862859334541727,-1.4203688344699614,-0.579856270368107,-1.6379248340865742,-3.087626921936966,-1.3357522793856296,-1.5335553383727514,-1.8756024839036345,-0.02970162246414998],[0.843210627493423,-2.0753820448177573,-1.5498514214520744,-1.6718461176985715,-0.4344951120228808,-3.013636682732746,-3.0703420121588096,0.1455865236351066,-0.05160286754987431,-2.3432351003862544,-1.2570367058040843,-1.944393154742049,1.4817154700537443,-2.1921692361769334,-1.6966222760004877,-5.105942698529606,-1.489380550917018,-0.7643591324157715,0.5531594351676019,-4.438988380857818],[-0.8758818434171332,-1.669802675481863,0.45671061050437334,-0.26429103565808626,0.05823200909195597,2.0530285274217026,-2.490472113636581,0.038528260286261606,-0.02061229540601761,-0.2497221168670067,1.446592913118838,-1.980994226796766,-1.565714438650525,0.20858991626593804,2.388481875205615,1.7226118698910784,-0.5030651118857999,-0.12012346971538285,1.7588640315538284,-1.321611604214127],[0.2631025594960964,0.11485105681383606,0.3368051358128471,0.8939319857430916,1.2383913428708855,0.23956750120178305,1.209423107441562,-0.5134312022801336,0.7930015726861653,0.9816394806750246,0.008880650903742016,-1.0253856541457402,0.017666702812333512,1.5538384776230298,1.6082796136374564,1.6070523437108621,2.1441764081336308,-0.06723100061700871,-0.08847953760106797,1.6023178570175607]]",
      "0.10"
    ]
  },
  {
    "testName": "Random One-way ANOVA (3 groups, α=0.10)",
    "func": "aov.one",
    "distribution": "anova",
    "args": [
      "[[-4.860898796423969,-0.18725122962621432,-0.5054469966501071,-0.7596317143643228,-0.3157404774745316,-1.4444335466815243,0.8438116827301498,-2.0504381268499605,-0.9417616572658196,-1.838813978458153,-1.3849052817510585,-0.7120847517516492,-2.0341440967345132],[0.09185261977977088,-1.217104652323973,1.1823666485183408,-2.667656723286239,-0.1930965867211034,-1.6688698255045122,-0.6135759750579515,-1.8344570076015503,-4.299578686838004,-0.28221967614585197,0.9715243284050255,-3.6317571110563156,-4.543021380211782],[-0.5147782818745799,-1.7802156603504553,-0.18181553673244977,-1.1789986782164545,-1.7110885276865233,-0.9904880333261519,-0.3088567034421803,0.5532293279487877,-1.0820002987612132,-1.138306639157785,-0.5505660029552386,-1.177956180449612,-0.7279526596488045]]",
      "0.10"
    ]
  },
  {
    "testName": "Random One-way ANOVA (3 groups, α=0.10)",
    "func": "aov.one",
    "distribution": "anova",
    "args": [
      "[[-0.21554173659223874,-0.05749972185270391,-1.5884804711594995,0.05088352872379209,-2.1645817541585,-2.680807537180275,-0.6412405898992859,0.3487221618657663,0.3096335913298587,-2.978255080339959,-1.933315741078019,-1.9429277666324676,-2.3808135578545633,-1.4674941023472674,-0.7183106728010706,-0.2446254196941614],[0.7433061189073285,0.6257467088308525,1.5119089041198321,0.6212061685604462,-1.7594695385395438,2.2268389157635666,-1.0654422216293404,1.9297673561293691,1.3114050119645708,1.044654748121156,1.6605018341771378,2.2793584198376102,-0.4773039353997921,0.5220663594384392,0.15856281218530577,2.239434342029706],[3.215840626305325,1.7313463211128088,1.3856646479812702,-0.2788587227036672,-0.16951784741129305,1.4053212032444558,2.9696035618123426,1.0303411502427002,0.356077699698529,2.2363119743847006,-0.14089221559565313,1.473442834370476,3.8449396573228656,4.102872463751336,-0.3189091676245075,-0.19442702487124897]]",
      "0.10"
    ]
  }
];

  const results = await runComparison(testCases);
  printResults(results);
}

if (import.meta.main) {
  main().catch(console.error);
}